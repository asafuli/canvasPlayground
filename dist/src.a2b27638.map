{"version":3,"sources":["src/gekko.js","src/index.js"],"names":["Gekko","ctx","htmlId","controls","right","left","up","down","jump","flip","position","x","y","w","h","movingSpeed","image","document","getElementById","speed","movingAxis","rotatePosition","move","bind","draw","updatePlayerPosition","stop","axis","sign","deltaTime","drawImage","i","setTimeout","clearRect","save","translate","rotate","Math","PI","restore","e","console","log","key","canvas","getContext","lastTime","players","gekkoExist","catBoyExist","yotamExist","gekkoThumb","catBoyThumb","yotamThumb","addEventListener","ev","addPlayer","newPlayer","target","id","alert","window","checkAction","push","GameLoop","timestamp","dt","map","player","requestAnimationFrame"],"mappings":"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","file":"src.a2b27638.map","sourceRoot":"..","sourcesContent":["export default class Gekko {\r\n  \r\n  constructor(ctx, htmlId, controls = {right: 'ArrowRight', left: 'ArrowLeft', up: 'ArrowUp', down: 'ArrowDown', jump: ' ', flip: 'Enter'}, position={x: 400, y: 300, w: 180, h: 180}, movingSpeed=50){\r\n    \r\n    this.ctx = ctx;\r\n    this.image = document.getElementById(htmlId);\r\n    this.speed = 0;\r\n    this.movingSpeed = movingSpeed;\r\n    this.movingAxis = 'x';\r\n    this.position = {...position};\r\n    this.rotatePosition = {...position};\r\n    this.controls = {...controls};\r\n    //bindings\r\n    this.move = this.move.bind(this);\r\n    this.jump = this.jump.bind(this);\r\n    this.flip = this.flip.bind(this);\r\n    this.draw = this.draw.bind(this);\r\n    this.updatePlayerPosition = this.updatePlayerPosition.bind(this);\r\n    this.stop = this.stop.bind(this);\r\n  }\r\n\r\n  //Functions\r\n\r\n  move(axis,sign){\r\n  this.speed = this.movingSpeed * sign;\r\n  this.movingAxis  = axis;\r\n  };\r\n\r\n  updatePlayerPosition(deltaTime){\r\n    if (!deltaTime) return;\r\n    this.position[this.movingAxis] += this.speed/deltaTime;\r\n  }\r\n\r\n  draw(){\r\n    const {x, y, w, h} = this.position;\r\n    return this.ctx.drawImage(this.image, x, y, w, h);\r\n  }\r\n\r\n  jump(){\r\n    for (let i = 0; i < 20 ; i++){\r\n      setTimeout(() => {\r\n        this.ctx.clearRect(0, 0, 1500, 770);\r\n        this.position.y = (i < 10) ? this.position.y - 10 : this.position.y + 10;\r\n        this.draw();\r\n      },i * 20,this.position)\r\n    }\r\n  }\r\n\r\n  flip(){\r\n    for (let i = 0; i < 361 ; i++){\r\n      \r\n      setTimeout(() => {\r\n        \r\n        // save the unrotated ctx of the canvas so we can restore it later\r\n        // the alternative is to untranslate & unrotate after drawing\r\n        this.ctx.clearRect(0,0,1500, 770);\r\n        this.ctx.save();\r\n        this.ctx.clearRect(0,0,this.position.x + this.position.w, this.position.y + this.position.h);\r\n        // move to the center of the canvas\r\n        this.ctx.translate(this.position.x + this.position.w/2, this.position.y + this.position.h/2);\r\n        // rotate the canvas to the specified degrees\r\n        this.ctx.rotate(1*Math.PI/180);\r\n        this.position.x = -this.position.w/2;\r\n        this.position.y = -this.position.h/2;\r\n        // draw the image\r\n        // since the ctx is rotated, the image will be rotated also\r\n        this.ctx.drawImage(this.image,this.position.x, this.position.y, 180, 180);\r\n        // weâ€™re done with the rotating so restore the unrotated ctx\r\n        if (i === 360){\r\n          this.ctx.restore();\r\n        }\r\n      },i * 2)\r\n    }\r\n    \r\n  }\r\n \r\n  checkAction(e){\r\n    console.log(e.key);\r\n    switch(e.key){\r\n      case this.controls.right:\r\n        this.move('x',1);\r\n        break\r\n      case this.controls.left:\r\n        this.move('x',-1);\r\n        break\r\n      case this.controls.up:\r\n        this.move('y',-1);\r\n        break\r\n      case this.controls.down:\r\n        this.move('y',1);\r\n        break\r\n      case this.controls.flip:\r\n        this.flip();\r\n        break\r\n      case this.controls.jump:\r\n        this.jump();\r\n        break\r\n    }\r\n  }\r\n  \r\n  stop(e){\r\n    switch(e.key){\r\n      case this.controls.right:\r\n        if (this.speed > 0 && this.movingAxis === 'x') this.speed = 0;  \r\n        break\r\n      case this.controls.left:\r\n        if (this.speed < 0 && this.movingAxis === 'x') this.speed = 0;\r\n        break\r\n      case this.controls.up:\r\n        if (this.speed < 0 && this.movingAxis === 'y') this.speed = 0;\r\n        break\r\n      case this.controls.down:\r\n        if (this.speed > 0 && this.movingAxis === 'y') this.speed = 0;\r\n        break\r\n    }\r\n  }\r\n\r\n  /*getRandomColor() {\r\n    var letters = '0123456789ABCDEF';\r\n    var color = '#';\r\n    for (var i = 0; i < 6; i++) {\r\n      color += letters[Math.floor(Math.random() * 16)];\r\n    }\r\n    return color;\r\n  }\r\n  */\r\n}","import Gekko from './gekko';\r\n\r\n//Globals\r\nlet canvas = document.getElementById(\"gameScreen\");\r\nlet ctx = canvas.getContext(\"2d\");\r\nlet lastTime = 0;\r\nlet players = [];\r\nlet gekkoExist = false;\r\nlet catBoyExist = false;\r\nlet yotamExist = false;\r\n//thumbnails\r\nlet gekkoThumb = document.getElementById(\"gekkoThumb\");\r\nlet catBoyThumb = document.getElementById(\"catBoyThumb\");\r\nlet yotamThumb = document.getElementById(\"yotamThumb\");\r\ngekkoThumb.addEventListener('click', function(ev){addPlayer(ev)}, false);\r\ncatBoyThumb.addEventListener('click', function(ev){addPlayer(ev)}, false);\r\nyotamThumb.addEventListener('click', function(ev){addPlayer(ev)}, false);\r\n\r\nfunction addPlayer(ev){\r\n  let newPlayer;\r\n  if (ev.target.id === \"gekkoThumb\" && !gekkoExist){\r\n    newPlayer = new Gekko(ctx, \"gekkoImg\");\r\n    gekkoExist = true;\r\n  } else if (ev.target.id === \"catBoyThumb\" && !catBoyExist){\r\n    newPlayer = new Gekko(ctx, \"catBoyImg\", {right: 'd', left: 'a', up: 'w', down: 's', jump: '1'});\r\n    catBoyExist = true;\r\n  } else if (ev.target.id === \"yotamThumb\" && !yotamExist){\r\n    newPlayer = new Gekko(ctx, \"yotamThumb\", {right: \"'\", left: 'l', up: 'p', down: ';', jump: '='});\r\n    yotamExist = true;\r\n  } else {\r\n    alert('Player already exist...');\r\n    return\r\n  }\r\n  window.addEventListener('keydown', e => newPlayer.checkAction(e));\r\n  window.addEventListener('keyup', e => newPlayer.stop(e));\r\n  players.push(newPlayer);\r\n}\r\n\r\nfunction GameLoop(timestamp){\r\n  let dt = timestamp - lastTime;\r\n  lastTime = timestamp;\r\n  ctx.clearRect(0,0,1500, 770);\r\n  players.map(player => {\r\n    player.updatePlayerPosition(dt);\r\n    player.draw();\r\n    }\r\n  )\r\n  requestAnimationFrame(GameLoop);\r\n}\r\n//Initial call\r\nGameLoop();\r\n\r\n\r\n\r\n\r\n"]}